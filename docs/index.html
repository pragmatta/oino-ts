<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>OINO TS</title><meta name="description" content="Documentation for OINO TS"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">OINO TS</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>OINO TS</h2></div><div class="tsd-panel tsd-typography"><a id="md:oino-ts" class="tsd-anchor"></a><h1 class="tsd-anchor-link">OINO TS<a href="#md:oino-ts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>OINO Is Not an ORM but it's trying to solve a similar problem for API development. Instead of mirroring your DB schema in code that needs manual updates, OINO will get the data schema from DBMS using SQL in real time. Every time your app starts, it has an updated data model which enables automatic (de)serialize SQL results to JSON/CSV and back. OINO works on the level below routing where you pass the method, URL ID, body and request parameters to the API-object. OINO will parse and validate the data against the data model and generate proper SQL for your DB. Because OINO knows how data is serialized (e.g. JSON), what column it belongs to (e.g. floating point number) and what the target database is, it knows how to parse, format and escape the value as valid SQL.</p>
<pre><code><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1">:</span><span class="hl-3">OINOApiResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">api_orderdetails</span><span class="hl-1">.</span><span class="hl-6">doRequest</span><span class="hl-1">(</span><span class="hl-7">&quot;GET&quot;</span><span class="hl-1">, </span><span class="hl-5">id</span><span class="hl-1">, </span><span class="hl-5">body</span><span class="hl-1">, </span><span class="hl-5">params</span><span class="hl-1">)</span><br/><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-6">Response</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">.</span><span class="hl-5">modelset</span><span class="hl-1">.</span><span class="hl-6">writeString</span><span class="hl-1">(</span><span class="hl-5">OINOContentType</span><span class="hl-1">.</span><span class="hl-5">json</span><span class="hl-1">))</span>
</code><button>Copy</button></pre>

<a id="md:getting-started" class="tsd-anchor"></a><h1 class="tsd-anchor-link">GETTING STARTED<a href="#md:getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:setup" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Setup<a href="#md:setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Install the <code>@oino-ts/core</code> npm package and necessary database packages and import them in your code.</p>
<pre><code><span class="hl-5">bun</span><span class="hl-1"> </span><span class="hl-5">install</span><span class="hl-1"> @</span><span class="hl-5">oino</span><span class="hl-1">-</span><span class="hl-5">ts</span><span class="hl-1">/</span><span class="hl-5">core</span><br/><span class="hl-5">bun</span><span class="hl-1"> </span><span class="hl-5">install</span><span class="hl-1"> @</span><span class="hl-5">oino</span><span class="hl-1">-</span><span class="hl-5">ts</span><span class="hl-1">/</span><span class="hl-5">bunsqlite</span>
</code><button>Copy</button></pre>

<pre><code><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">OINODb</span><span class="hl-1">, </span><span class="hl-5">OINOApi</span><span class="hl-1">, </span><span class="hl-5">OINOFactory</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-7">&quot;@oino-ts/core&quot;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">OINODbBunSqlite</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-7">&quot;@oino-ts/bunsqlite&quot;</span>
</code><button>Copy</button></pre>

<a id="md:register-database-and-logger" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Register database and logger<a href="#md:register-database-and-logger" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Register your database implementation and logger (see <a href="https://pragmatta.github.io/oino-ts/classes/core_src.OINOConsoleLog.html"><code>OINOConsoleLog</code></a> how to implement your own)</p>
<pre><code><span class="hl-5">OINOLog</span><span class="hl-1">.</span><span class="hl-6">setLogger</span><span class="hl-1">(</span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-6">OINOConsoleLog</span><span class="hl-1">())</span><br/><span class="hl-5">OINOFactory</span><span class="hl-1">.</span><span class="hl-6">registerDb</span><span class="hl-1">(</span><span class="hl-7">&quot;OINODbBunSqlite&quot;</span><span class="hl-1">, </span><span class="hl-5">OINODbBunSqlite</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>

<a id="md:create-a-database" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Create a database<a href="#md:create-a-database" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Creating a database connection <a href="https://pragmatta.github.io/oino-ts/classes/core_src_OINODb.OINODb.html"><code>OINODb</code></a> is done by passing <a href="https://pragmatta.github.io/oino-ts/types/core_src.OINODbParams.html"><code>OINODbParams</code></a> to the factory method. For <a href="https://pragmatta.github.io/oino-ts/classes/bunsqlite_OINODbBunSqlite.OINODbBunSqlite.html"><code>OINODbBunSqlite</code></a> that means a file url for the database file, for others network host, port, credentials etc.</p>
<pre><code><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">db</span><span class="hl-1">:</span><span class="hl-3">OINODb</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">OINOFactory</span><span class="hl-1">.</span><span class="hl-6">createDb</span><span class="hl-1">( { </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-7">&quot;OINODbBunSqlite&quot;</span><span class="hl-1">, </span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-7">&quot;file://../localDb/northwind.sqlite&quot;</span><span class="hl-1"> } )</span>
</code><button>Copy</button></pre>

<a id="md:create-an-api" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Create an API<a href="#md:create-an-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>From a database you can create an <a href="https://pragmatta.github.io/oino-ts/classes/core_src_OINOApi.OINOApi.html"><code>OINOApi</code></a> by passing <a href="https://pragmatta.github.io/oino-ts/types/core_src.OINOApiParams.html"><code>OINOApiParams</code></a> with table name and preferences to the factory method.</p>
<pre><code><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">api_employees</span><span class="hl-1">:</span><span class="hl-3">OINOApi</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">OINOFactory</span><span class="hl-1">.</span><span class="hl-6">createApi</span><span class="hl-1">(</span><span class="hl-5">db</span><span class="hl-1">, { </span><span class="hl-5">tableName:</span><span class="hl-1"> </span><span class="hl-7">&quot;Employees&quot;</span><span class="hl-1">, </span><span class="hl-5">excludeFields:</span><span class="hl-1">[</span><span class="hl-7">&quot;BirthDate&quot;</span><span class="hl-1">] })</span>
</code><button>Copy</button></pre>

<a id="md:pass-http-requests-to-api" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Pass HTTP requests to API<a href="#md:pass-http-requests-to-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When you receive a HTTP request, just pass the method, URL ID, body and params to the correct API, which will parse and validate input and return results.</p>
<pre><code><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1">:</span><span class="hl-3">OINOApiResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">api_orderdetails</span><span class="hl-1">.</span><span class="hl-6">doRequest</span><span class="hl-1">(</span><span class="hl-7">&quot;GET&quot;</span><span class="hl-1">, </span><span class="hl-5">id</span><span class="hl-1">, </span><span class="hl-5">body</span><span class="hl-1">, </span><span class="hl-5">params</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>

<a id="md:write-results-back-to-http-response" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Write results back to HTTP Response<a href="#md:write-results-back-to-http-response" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The results for a GET request will contain <a href="https://pragmatta.github.io/oino-ts/classes/core_src_OINOModelSet.OINOModelSet.html"><code>OINOModelSet</code></a> data that can be written out as JSON or CSV as needed. For other requests result is just success or error with messages.</p>
<pre><code><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-6">Response</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">.</span><span class="hl-5">modelset</span><span class="hl-1">.</span><span class="hl-6">writeString</span><span class="hl-1">(</span><span class="hl-5">OINOContentType</span><span class="hl-1">.</span><span class="hl-5">json</span><span class="hl-1">))</span>
</code><button>Copy</button></pre>

<a id="md:features" class="tsd-anchor"></a><h1 class="tsd-anchor-link">FEATURES<a href="#md:features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:restfull" class="tsd-anchor"></a><h2 class="tsd-anchor-link">RESTfull<a href="#md:restfull" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OINO maps HTTP methods GET/POST/PUT/DELETE to SQL operations SELECT/INSERT/UPDATE/DELETE. The GET/POST requests can be made without URL ID to get all rows or insert new ones and others target a single row using URL ID.</p>
<a id="md:http-get" class="tsd-anchor"></a><h3 class="tsd-anchor-link">HTTP GET<a href="#md:http-get" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code><span class="hl-5">Request</span><span class="hl-1"> </span><span class="hl-5">and</span><span class="hl-1"> </span><span class="hl-8">response</span><span class="hl-1">:</span><br/><span class="hl-1">&gt; </span><span class="hl-5">curl</span><span class="hl-1">.</span><span class="hl-5">exe</span><span class="hl-1"> -</span><span class="hl-2">X</span><span class="hl-1"> </span><span class="hl-2">GET</span><span class="hl-1"> </span><span class="hl-8">http</span><span class="hl-1">:</span><span class="hl-9">//localhost:3001/orderdetails/11077:77</span><br/><span class="hl-1">[</span><br/><span class="hl-1">  {</span><span class="hl-7">&quot;_OINOID_&quot;</span><span class="hl-5">:</span><span class="hl-7">&quot;11077:77&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;OrderID&quot;</span><span class="hl-5">:</span><span class="hl-10">11077</span><span class="hl-1">,</span><span class="hl-7">&quot;ProductID&quot;</span><span class="hl-5">:</span><span class="hl-10">77</span><span class="hl-1">,</span><span class="hl-7">&quot;UnitPrice&quot;</span><span class="hl-5">:</span><span class="hl-10">13</span><span class="hl-1">,</span><span class="hl-7">&quot;Quantity&quot;</span><span class="hl-5">:</span><span class="hl-10">2</span><span class="hl-1">,</span><span class="hl-7">&quot;Discount&quot;</span><span class="hl-5">:</span><span class="hl-10">0</span><span class="hl-1">}</span><br/><span class="hl-1">]</span><br/><br/><span class="hl-8">SQL</span><span class="hl-1">:</span><br/><span class="hl-2">SELECT</span><span class="hl-1"> </span><span class="hl-7">&quot;OrderID&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;ProductID&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;UnitPrice&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;Quantity&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;Discount&quot;</span><span class="hl-1"> </span><span class="hl-2">FROM</span><span class="hl-1"> [</span><span class="hl-5">OrderDetails</span><span class="hl-1">] </span><span class="hl-6">WHERE</span><span class="hl-1"> (</span><span class="hl-7">&quot;OrderID&quot;</span><span class="hl-1">=</span><span class="hl-10">11077</span><span class="hl-1"> </span><span class="hl-2">AND</span><span class="hl-1"> </span><span class="hl-7">&quot;ProductID&quot;</span><span class="hl-1">=</span><span class="hl-10">77</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="md:http-post" class="tsd-anchor"></a><h3 class="tsd-anchor-link">HTTP POST<a href="#md:http-post" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code><span class="hl-5">Request</span><span class="hl-1"> </span><span class="hl-5">and</span><span class="hl-1"> </span><span class="hl-8">response</span><span class="hl-1">:</span><br/><span class="hl-1">&gt; </span><span class="hl-5">curl</span><span class="hl-1">.</span><span class="hl-5">exe</span><span class="hl-1"> -</span><span class="hl-2">X</span><span class="hl-1"> </span><span class="hl-2">POST</span><span class="hl-1"> </span><span class="hl-8">http</span><span class="hl-1">:</span><span class="hl-9">//localhost:3001/orderdetails -H &quot;Content-Type: application/json&quot; --data &#39;[{\&quot;OrderID\&quot;:11077,\&quot;ProductID\&quot;:99,\&quot;UnitPrice\&quot;:19,\&quot;Quantity\&quot;:1,\&quot;Discount\&quot;:0}]&#39;</span><br/><span class="hl-1">{</span><span class="hl-7">&quot;success&quot;</span><span class="hl-1">:</span><span class="hl-0">true</span><span class="hl-1">,</span><span class="hl-7">&quot;statusCode&quot;</span><span class="hl-1">:</span><span class="hl-10">200</span><span class="hl-1">,</span><span class="hl-7">&quot;statusMessage&quot;</span><span class="hl-1">:</span><span class="hl-7">&quot;OK&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;messages&quot;</span><span class="hl-1">:[]}</span><br/><br/><span class="hl-8">SQL</span><span class="hl-1">:</span><br/><span class="hl-2">INSERT</span><span class="hl-1"> </span><span class="hl-2">INTO</span><span class="hl-1"> [</span><span class="hl-5">OrderDetails</span><span class="hl-1">] (</span><span class="hl-7">&quot;OrderID&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;ProductID&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;UnitPrice&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;Quantity&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;Discount&quot;</span><span class="hl-1">) </span><span class="hl-6">VALUES</span><span class="hl-1"> (</span><span class="hl-10">11077</span><span class="hl-1">,</span><span class="hl-10">99</span><span class="hl-1">,</span><span class="hl-10">19</span><span class="hl-1">,</span><span class="hl-10">1</span><span class="hl-1">,</span><span class="hl-10">0</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="md:http-put" class="tsd-anchor"></a><h3 class="tsd-anchor-link">HTTP PUT<a href="#md:http-put" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code><span class="hl-5">Request</span><span class="hl-1"> </span><span class="hl-5">and</span><span class="hl-1"> </span><span class="hl-8">response</span><span class="hl-1">:</span><br/><span class="hl-1">&gt; </span><span class="hl-5">curl</span><span class="hl-1">.</span><span class="hl-5">exe</span><span class="hl-1"> -</span><span class="hl-2">X</span><span class="hl-1"> </span><span class="hl-2">PUT</span><span class="hl-1"> </span><span class="hl-8">http</span><span class="hl-1">:</span><span class="hl-9">//localhost:3001/orderdetails/11077:99 -H &quot;Content-Type: application/json&quot; --data &#39;[{\&quot;UnitPrice\&quot;:20}]&#39;</span><br/><span class="hl-1">{</span><span class="hl-7">&quot;success&quot;</span><span class="hl-1">:</span><span class="hl-0">true</span><span class="hl-1">,</span><span class="hl-7">&quot;statusCode&quot;</span><span class="hl-1">:</span><span class="hl-10">200</span><span class="hl-1">,</span><span class="hl-7">&quot;statusMessage&quot;</span><span class="hl-1">:</span><span class="hl-7">&quot;OK&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;messages&quot;</span><span class="hl-1">:[]}</span><br/><br/><span class="hl-8">SQL</span><span class="hl-1">:</span><br/><span class="hl-2">UPDATE</span><span class="hl-1"> [</span><span class="hl-5">OrderDetails</span><span class="hl-1">] </span><span class="hl-2">SET</span><span class="hl-1"> </span><span class="hl-7">&quot;UnitPrice&quot;</span><span class="hl-1">=</span><span class="hl-10">20</span><span class="hl-1"> </span><span class="hl-6">WHERE</span><span class="hl-1"> (</span><span class="hl-7">&quot;OrderID&quot;</span><span class="hl-1">=</span><span class="hl-10">11077</span><span class="hl-1"> </span><span class="hl-2">AND</span><span class="hl-1"> </span><span class="hl-7">&quot;ProductID&quot;</span><span class="hl-1">=</span><span class="hl-10">99</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="md:http-delete" class="tsd-anchor"></a><h3 class="tsd-anchor-link">HTTP DELETE<a href="#md:http-delete" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code><span class="hl-5">Request</span><span class="hl-1"> </span><span class="hl-5">and</span><span class="hl-1"> </span><span class="hl-8">response</span><span class="hl-1">:</span><br/><span class="hl-1">&gt; </span><span class="hl-5">curl</span><span class="hl-1">.</span><span class="hl-5">exe</span><span class="hl-1"> -</span><span class="hl-2">X</span><span class="hl-1"> </span><span class="hl-2">DELETE</span><span class="hl-1"> </span><span class="hl-8">http</span><span class="hl-1">:</span><span class="hl-9">//localhost:3001/orderdetails/11077:99</span><br/><span class="hl-1">{</span><span class="hl-7">&quot;success&quot;</span><span class="hl-1">:</span><span class="hl-0">true</span><span class="hl-1">,</span><span class="hl-7">&quot;statusCode&quot;</span><span class="hl-1">:</span><span class="hl-10">200</span><span class="hl-1">,</span><span class="hl-7">&quot;statusMessage&quot;</span><span class="hl-1">:</span><span class="hl-7">&quot;OK&quot;</span><span class="hl-1">,</span><span class="hl-7">&quot;messages&quot;</span><span class="hl-1">:[]}</span><br/><br/><span class="hl-8">SQL</span><span class="hl-1">:</span><br/><span class="hl-2">DELETE</span><span class="hl-1"> </span><span class="hl-2">FROM</span><span class="hl-1"> [</span><span class="hl-5">OrderDetails</span><span class="hl-1">] </span><span class="hl-6">WHERE</span><span class="hl-1"> (</span><span class="hl-7">&quot;OrderID&quot;</span><span class="hl-1">=</span><span class="hl-10">11077</span><span class="hl-1"> </span><span class="hl-2">AND</span><span class="hl-1"> </span><span class="hl-7">&quot;ProductID&quot;</span><span class="hl-1">=</span><span class="hl-10">99</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="md:universal-serialization" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Universal Serialization<a href="#md:universal-serialization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OINO handles serialization of data to JSON/CSV/etc. and back based on the data model. It knows what columns exist, what is their data type and how to convert each to JSON/CSV and back. This allows also partial data to be sent, i.e. you can send only columns that need updating or even send extra columns and have them ignored.</p>
<a id="md:features-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Features<a href="#md:features-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Files can be sent to BLOB fields using BASE64 encoding.</li>
<li>Datetimes are (optionally) normalized to ISO 8601 format.</li>
<li>Extended JSON-encoding
<ul>
<li>Unquoted literal <code>undefined</code> can be used to represent non-existent values (leaving property out works too but preserving structure might be easier e.g. when translating data).</li>
</ul>
</li>
<li>CSV
<ul>
<li>Comma-separated, doublequotes.</li>
<li>Unquoted literal <code>null</code> represents null values.</li>
<li>Unquoted empty string represents undefined values.</li>
</ul>
</li>
<li>Form data
<ul>
<li>Multipart-mixed and binary files not supported.</li>
<li>Non-existent value line (i.e. nothing after the empty line) treated as a null value.</li>
</ul>
</li>
<li>Url-encoded
<ul>
<li>No null values, missing properties treated as undefined.</li>
<li>Multiple lines could be used to post multiple rows.</li>
</ul>
</li>
</ul>
<a id="md:database-abstraction" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Database Abstraction<a href="#md:database-abstraction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OINO functions as a database abstraction, providing a consistent interface for working with different databases. It abstracts out different conventions in connecting, making queries and formatting data.</p>
<p>Currently supported databases:</p>
<ul>
<li>Bun Sqlite through Bun native implementation</li>
<li>Postgresql through <a href="https://www.npmjs.com/package/pg">pg</a>-package</li>
<li>Mariadb / Mysql-support through <a href="https://www.npmjs.com/package/mariadb">mariadb</a>-package</li>
</ul>
<a id="md:complex-keys" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Complex Keys<a href="#md:complex-keys" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To support tables with multipart primary keys OINO generates a composite key <code>_OINOID_</code> that is included in the result and can be used as the REST ID. For example in the example above table <code>OrderDetails</code> has two primary keys <code>OrderID</code> and <code>ProductID</code> making the <code>_OINOID_</code> of form <code>11077:99</code>.</p>
<a id="md:power-of-sql" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Power Of SQL<a href="#md:power-of-sql" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Since OINO controls the SQL, WHERE-conditions can be defined through <a href="https://pragmatta.github.io/oino-ts/classes/core_src_OINOFilter.OINOFilter.html"><code>OINOFilter</code></a> that are passed as HTTP request parameters. No more API development where you make unique API endpoints for each filter that fetch all data with original API and filter in backend code. Every API can be filtered when and as needed without unnessecary data tranfer and utilizing SQL indexing when available.</p>
<a id="md:swagger-support" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Swagger Support<a href="#md:swagger-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Swagger is great as long as the definitions are updated and with OINO you can automatically get a Swagger definition including a data model schema.</p>
<pre><code><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">url</span><span class="hl-1">.</span><span class="hl-5">pathname</span><span class="hl-1"> == </span><span class="hl-7">&quot;/swagger.json&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">   </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-6">Response</span><span class="hl-1">(</span><span class="hl-2">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-5">OINOSwagger</span><span class="hl-1">.</span><span class="hl-6">getApiDefinition</span><span class="hl-1">(</span><span class="hl-5">api_array</span><span class="hl-1">)))</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>

<p><img src="media/readme-swagger.png" alt="Swagger definition with a data model schema"></p>
<a id="md:node-support" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Node support<a href="#md:node-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OINO is developped Typescript first but compiles to standard CommonJS and the NPM packages should work on either ESM / CommonJS. Checkout sample apps <code>readmeApp</code> (ESM) and <code>nodeApp</code> (CommonJS).</p>
<a id="md:htmx-support" class="tsd-anchor"></a><h2 class="tsd-anchor-link">HTMX support<a href="#md:htmx-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OINO is <a href="https://htmx.org">htmx.org</a> friendly, allowing easy translation of <a href="https://pragmatta.github.io/oino-ts/types/core_src.OINODataRow.html"><code>OINODataRow</code></a> to HTML output using templates (cf. the <a href="https://github.com/pragmatta/oino-ts/tree/main/samples/htmxApp">htmx sample app</a>).</p>
<a id="md:hashids" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Hashids<a href="#md:hashids" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Autoinc numeric id's are very pragmatic and fit well with OINO (e.g. using a form without primary key fields to insert new rows with database assigned ids). However it's not always sensible to share information about the sequence. Hashids solve this by masking the original values by encrypting the ids using AES-128 and some randomness. Length of the hashid can be chosen from 12-32 characters where longer ids provide more security. However this should not be considereded a cryptographic solution for keeping ids secret but rather making it infeasible to iterate all ids.</p>
<a id="md:status" class="tsd-anchor"></a><h1 class="tsd-anchor-link">STATUS<a href="#md:status" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>OINO is currently a hobby project which should and should considered in alpha status. That also means compatibility breaking changes can be made without prior notice when architectual issues are discovered.</p>
<a id="md:beta" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Beta<a href="#md:beta" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For a beta status following milestones are planned:</p>
<a id="md:realistic-app" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Realistic app<a href="#md:realistic-app" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>There needs to be a realistic app built on top of OINO to get a better grasp of the edge cases.</p>
<a id="md:security-review" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Security review<a href="#md:security-review" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Handling of SQL-injection attacks needs a thorough review, what are the relevant attack vectors are for OINO and what protections are still needed.</p>
<a id="md:roadmap" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Roadmap<a href="#md:roadmap" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Things that need to happen in some order before beta-status are at least following:</p>
<a id="md:support-for-views" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Support for views<a href="#md:support-for-views" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Simple cases of views would work already in some databases but edge cases might get complicated. For example</p>
<ul>
<li>How to handle a view which does not have a complete private key?</li>
<li>What edge cases exist in updating views?</li>
</ul>
<a id="md:batch-updates" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Batch updates<a href="#md:batch-updates" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Supporting batch updates similar to batch inserts is slightly bending the RESTfull principles but would still be a useful optional feature.</p>
<a id="md:aggregation-ordering-and-limits" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Aggregation, ordering and limits<a href="#md:aggregation-ordering-and-limits" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Similar to filtering, aggregation, ordering and limits can be implemented as HTTP request parameters telling what column is aggregated or used for ordering or how many results to return.</p>
<a id="md:streaming" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Streaming<a href="#md:streaming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>One core idea is to be efficient in not making unnecessary copies of the data and minimizing garbage collection debt. This can be taken further by implementing streaming, allowing large dataset to be written to HTTP response as SQL result rows are received.</p>
<a id="md:sql-generation-callbacks" class="tsd-anchor"></a><h3 class="tsd-anchor-link">SQL generation callbacks<a href="#md:sql-generation-callbacks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>It would be useful to allow developer to validate / override SQL generation to cover cases OINO does not support or even workaround issues.</p>
<a id="md:transactions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Transactions<a href="#md:transactions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Even though the basic case for OINO is executing SQL operations on individual rows, having an option to use SQL transactions could make sense at least for batch operations.</p>
<a id="md:help" class="tsd-anchor"></a><h1 class="tsd-anchor-link">HELP<a href="#md:help" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:bug-reports" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Bug reports<a href="#md:bug-reports" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Fixing bugs is a priority and getting good quality bug reports helps. It's recommended to use the sample Northwind database included with project to replicate issues or make an SQL script export of the relevant table.</p>
<a id="md:feedback" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Feedback<a href="#md:feedback" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Understanding and prioritizing the use cases for OINO is also important and feedback about how you'd use OINO is interesting. Feel free to raise issues and feature requests in Github, but understand that short term most of the effort goes towards reaching the beta stage.</p>
<a id="md:typescript--javascript-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Typescript / Javascript architecture<a href="#md:typescript--javascript-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Typescript building with different targets and module-systemts and a ton of configuration is a complex domain and something I have little experience un so help in fixing problems and how thing ought to be done is appreciated.</p>
<a id="md:links" class="tsd-anchor"></a><h1 class="tsd-anchor-link">LINKS<a href="#md:links" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li><a href="https://github.com/pragmatta/oino-ts">Github repository</a></li>
<li><a href="https://www.npmjs.com/org/oino-ts">NPM repository</a></li>
</ul>
<a id="md:acknowledgements" class="tsd-anchor"></a><h1 class="tsd-anchor-link">ACKNOWLEDGEMENTS<a href="#md:acknowledgements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:libraries" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Libraries<a href="#md:libraries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OINO uses the following open source libraries and npm packages and I would like to thank everyone for their contributions:</p>
<ul>
<li>Postgresql support by <a href="https://www.npmjs.com/package/pg">node-postgres package</a></li>
<li>Mariadb / Mysql-support by <a href="https://www.npmjs.com/package/mariadb">mariadb package</a></li>
</ul>
<a id="md:bun" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Bun<a href="#md:bun" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OINO has been developed using the Bun runtime, not because of the speed improvements but for the first class Typescript support and integrated developper experience. Kudos on the bun team for making Typescript work more exiting again.</p>
<a id="md:sql-scripts" class="tsd-anchor"></a><h2 class="tsd-anchor-link">SQL Scripts<a href="#md:sql-scripts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The SQL scripts for creating the sample Northwind database are based on <a href="https://code.google.com/archive/p/northwindextended/downloads">Google Code archive</a> and have been further customized to ensure they would have identical data (in the scope of the automated testing).</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:oino-ts"><span>OINO TS</span></a><a href="#md:getting-started"><span>GETTING STARTED</span></a><ul><li><ul><li><a href="#md:setup"><span>Setup</span></a></li><li><a href="#md:register-database-and-logger"><span>Register database and logger</span></a></li><li><a href="#md:create-a-database"><span>Create a database</span></a></li><li><a href="#md:create-an-api"><span>Create an API</span></a></li><li><a href="#md:pass-http-requests-to-api"><span>Pass HTTP requests to API</span></a></li><li><a href="#md:write-results-back-to-http-response"><span>Write results back to HTTP <wbr/>Response</span></a></li></ul></li></ul><a href="#md:features"><span>FEATURES</span></a><ul><li><a href="#md:restfull"><span>RESTfull</span></a></li><li><ul><li><a href="#md:http-get"><span>HTTP GET</span></a></li><li><a href="#md:http-post"><span>HTTP POST</span></a></li><li><a href="#md:http-put"><span>HTTP PUT</span></a></li><li><a href="#md:http-delete"><span>HTTP DELETE</span></a></li></ul></li><li><a href="#md:universal-serialization"><span>Universal <wbr/>Serialization</span></a></li><li><ul><li><a href="#md:features-1"><span>Features</span></a></li></ul></li><li><a href="#md:database-abstraction"><span>Database <wbr/>Abstraction</span></a></li><li><a href="#md:complex-keys"><span>Complex <wbr/>Keys</span></a></li><li><a href="#md:power-of-sql"><span>Power <wbr/>Of SQL</span></a></li><li><a href="#md:swagger-support"><span>Swagger <wbr/>Support</span></a></li><li><a href="#md:node-support"><span>Node support</span></a></li><li><a href="#md:htmx-support"><span>HTMX support</span></a></li><li><ul><li><a href="#md:hashids"><span>Hashids</span></a></li></ul></li></ul><a href="#md:status"><span>STATUS</span></a><ul><li><a href="#md:beta"><span>Beta</span></a></li><li><ul><li><a href="#md:realistic-app"><span>Realistic app</span></a></li><li><a href="#md:security-review"><span>Security review</span></a></li></ul></li><li><a href="#md:roadmap"><span>Roadmap</span></a></li><li><ul><li><a href="#md:support-for-views"><span>Support for views</span></a></li><li><a href="#md:batch-updates"><span>Batch updates</span></a></li><li><a href="#md:aggregation-ordering-and-limits"><span>Aggregation, ordering and limits</span></a></li><li><a href="#md:streaming"><span>Streaming</span></a></li><li><a href="#md:sql-generation-callbacks"><span>SQL generation callbacks</span></a></li><li><a href="#md:transactions"><span>Transactions</span></a></li></ul></li></ul><a href="#md:help"><span>HELP</span></a><ul><li><a href="#md:bug-reports"><span>Bug reports</span></a></li><li><a href="#md:feedback"><span>Feedback</span></a></li><li><a href="#md:typescript--javascript-architecture"><span>Typescript / <wbr/>Javascript architecture</span></a></li></ul><a href="#md:links"><span>LINKS</span></a><a href="#md:acknowledgements"><span>ACKNOWLEDGEMENTS</span></a><ul><li><a href="#md:libraries"><span>Libraries</span></a></li><li><a href="#md:bun"><span>Bun</span></a></li><li><a href="#md:sql-scripts"><span>SQL <wbr/>Scripts</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>OINO TS</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
